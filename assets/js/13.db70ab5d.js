(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{575:function(s,e,t){"use strict";t.r(e);var a=t(17),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"rest-framework专栏讲解-三-generic-view"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rest-framework专栏讲解-三-generic-view"}},[s._v("#")]),s._v(" Rest-framework专栏讲解(三)：Generic view")]),s._v(" "),t("h3",{attrs:{id:"genericapiview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#genericapiview"}},[s._v("#")]),s._v(" GenericAPIView")]),s._v(" "),t("p",[s._v("了解到 "),t("code",[s._v("APIView")]),s._v(" 之后, 你可以尝试看下 "),t("code",[s._v("GenericAPIView")]),s._v(" 的源码, 导入路径是：")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/usr/bin/env python")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# _*_ coding: UTF-8 _*_")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("generics "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" GenericAPIView\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("在源码中可以看到它是在 "),t("code",[s._v("APIView")]),s._v(" 的一种拓展, 当你继承这个视图类撰写自定义视图的时候, 你可以获取以下几个属性：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("queryset")]),s._v("：用于从该视图返回查询集对象, 必须设置此属性或重写 "),t("code",[s._v("get_queryset()")]),s._v(" 方法, 如果要覆盖视图方法, 则必须进行调用 "),t("code",[s._v("get_queryset()")]),s._v(" 而不是直接访问此属性")]),s._v(" "),t("li",[t("code",[s._v("serializer_class")]),s._v("：用于验证输入和反序列化输出的序列化类, 必须设置此属性或重写 "),t("code",[s._v("get_serializer_class()")]),s._v(" 方法。")]),s._v(" "),t("li",[t("code",[s._v("lookup_field")]),s._v("：用于执行单个模型实例的对象查找的模型字段, 默认为 "),t("code",[s._v("pk")])]),s._v(" "),t("li",[t("code",[s._v("lookup_url_kwarg")]),s._v("：用于对象查找的URL关键字参数")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/usr/bin/env python")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# _*_ coding: UTF-8 _*_")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" serializers\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("generics "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" GenericAPIView\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("permissions "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" IsAdminUser\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" models "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" User\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MedusaSerializer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("serializers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Serializer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MedusaView")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GenericAPIView"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    queryset "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" User"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("objects"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("all")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    serializer_class "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MedusaSerializer\n    permission_classes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IsAdminUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("当然, 可能在 "),t("code",[s._v("APIView")]),s._v(" 上拓展了一些方法放我们的 API 撰写变得简单, 并且富有规范性, 但是相比较而言, 他的存在更加推荐和 "),t("code",[s._v("mixins")]),s._v(" 一起使用,")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("perform_create(self, serializer)")]),s._v(" - CreateModelMixin 保存新对象实例时调用")]),s._v(" "),t("li",[t("code",[s._v("perform_update(self, serializer)")]),s._v(" - UpdateModelMixin 保存现有对象实例时调用")]),s._v(" "),t("li",[t("code",[s._v("perform_destroy(self, instance)")]),s._v(" - DestroyModelMixin 删除对象实例时调用")])]),s._v(" "),t("p",[s._v("例如你在新建实例对象进行保存处理的时候还需要做其他的处理, 你就可以在 "),t("code",[s._v("perform_create(self, serializer)")]),s._v(" 中对它进行重写：")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("perform_create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" serializer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    instance "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" serializer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("save"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 你需要做的其他处理的函数, 或者代码块")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("你也可以对更新的数据进行再次验证, 引发 "),t("code",[s._v("ValidationError()")]),s._v(" 异常：")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("perform_update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" serializer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("raise")]),s._v(" ValidationError"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'我不管，我就是不让你更新。'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    serializer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("save"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("当然啦, 还有 "),t("code",[s._v("ListModelMixin")]),s._v(" 来获取数据集合的, "),t("code",[s._v("RetrieveModelMixin")]),s._v(" 来获取某一数据详情的, 大多数的请求方式和请求内容都已经概括了。")]),s._v(" "),t("h3",{attrs:{id:"listmodelmixin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#listmodelmixin"}},[s._v("#")]),s._v(" ListModelMixin")]),s._v(" "),t("p",[s._v("提供了 "),t("code",[s._v(".list(request, *args, **kwargs)")]),s._v(" 方法, 用于查询对象集合, 你也可以重写他的 "),t("code",[s._v("list")]),s._v(" 方法实现你自己的返回体, 你也可以对他进行数据分页("),t("strong",[s._v("分页")]),s._v(" 将会在以后讲解到), 当你查询成功了, 将会返回 "),t("code",[s._v("200 OK")]),s._v(" 的状态码给你：")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/usr/bin/env python")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# _*_ coding: UTF-8 _*_")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("generics "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" GenericAPIView\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mixins "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" ListModelMixin\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("permissions "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" IsAdminUser\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MedusaView")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GenericAPIView"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ListModelMixin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    queryset "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" User"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("objects"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("all")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    serializer_class "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MedusaSerializer\n    permission_classes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IsAdminUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"createmodelmixin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#createmodelmixin"}},[s._v("#")]),s._v(" CreateModelMixin")]),s._v(" "),t("p",[s._v("提供 "),t("code",[s._v(".create(request, *args, **kwargs)")]),s._v(" 方法, 该方法实现创建并保存模型的新实例对象, 如果成功创建对象则返回一个 "),t("code",[s._v("201 Created")]),s._v(" 响应, 如果提供的用于创建对象的请求数据无效, 则会返回一个 "),t("code",[s._v("400 Bad Request")]),s._v(" 响应, 并将错误详细信息作为响应的正文。")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/usr/bin/env python")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# _*_ coding: UTF-8 _*_")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("generics "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" GenericAPIView\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mixins "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" CreateModelMixin\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("permissions "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" IsAdminUser\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MedusaView")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GenericAPIView"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" CreateModelMixin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    queryset "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" User"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("objects"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("all")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    serializer_class "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MedusaSerializer\n    permission_classes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IsAdminUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"retrievemodelmixin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#retrievemodelmixin"}},[s._v("#")]),s._v(" RetrieveModelMixin")]),s._v(" "),t("p",[s._v("提供 "),t("code",[s._v(".retrieve(request, *args, **kwargs)")]),s._v(" 方法, 该方法实现在响应中返回现有模型实例的详情数据, 如果可以检索到对象, 则返回一个 "),t("code",[s._v("200 OK")]),s._v(" 响应, 否则将返回 "),t("code",[s._v("404 Not Found")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/usr/bin/env python")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# _*_ coding: UTF-8 _*_")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("generics "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" GenericAPIView\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mixins "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" RetrieveModelMixin\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("permissions "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" IsAdminUser\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MedusaView")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GenericAPIView"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" RetrieveModelMixin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    queryset "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" User"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("objects"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("all")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    serializer_class "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MedusaSerializer\n    permission_classes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IsAdminUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"updatemodelmixin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#updatemodelmixin"}},[s._v("#")]),s._v(" UpdateModelMixin")]),s._v(" "),t("p",[s._v("提供 "),t("code",[s._v(".update(request, *args, **kwargs)")]),s._v(" 方法, 该方法实现更新并保存现有模型的实例， 还提供了一种 "),t("code",[s._v(".partial_update(request, *args, **kwargs)")]),s._v(" 方法, 该方法与该 "),t("code",[s._v("update")]),s._v(" 方法类似, 但是用于更新的所有字段都是可选的, 这样可以支持 "),t("code",[s._v("HTTP PATCH")]),s._v(" 请求(作者在实际开发中, 会对 "),t("code",[s._v("UpdateModelsMixin")]),s._v(" 重新定义, 删除对 "),t("code",[s._v("HTTP PATCH")]),s._v(" 请求方式的支持), 如果对象被更新, 它将返回一个 "),t("code",[s._v("200 OK")]),s._v(" 响应, 如果提供的用于更新对象的请求数据无效, 则会返回 "),t("code",[s._v("400 Bad Request")]),s._v(" 响应, 并将错误详细信息作为响应的主体。")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/usr/bin/env python")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# _*_ coding: UTF-8 _*_")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("generics "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" GenericAPIView\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mixins "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" UpdateModelMixin\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("permissions "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" IsAdminUser\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MedusaView")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GenericAPIView"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" UpdateModelMixin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    queryset "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" User"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("objects"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("all")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    serializer_class "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MedusaSerializer\n    permission_classes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IsAdminUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n复制代码\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h3",{attrs:{id:"destroymodelmixin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#destroymodelmixin"}},[s._v("#")]),s._v(" DestroyModelMixin")]),s._v(" "),t("p",[s._v("提供 "),t("code",[s._v(".destroy(request, *args, **kwargs)")]),s._v(" 方法, 该方法实现删除现有模型实例, 如果删除对象成功则返回 "),t("code",[s._v("204 No Content")]),s._v(" 响应, 否则将返回 "),t("code",[s._v("404 Not Found")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/usr/bin/env python")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# _*_ coding: UTF-8 _*_")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("generics "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" GenericAPIView\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mixins "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" DestroyModelMixin\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("permissions "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" IsAdminUser\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MedusaView")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GenericAPIView"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" DestroyModelMixin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    queryset "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" User"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("objects"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("all")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    serializer_class "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MedusaSerializer\n    permission_classes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IsAdminUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"组合的视图类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组合的视图类"}},[s._v("#")]),s._v(" 组合的视图类")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("CreateAPIView")]),s._v("\n用于仅创建新模型实例对象的视图\n提供 "),t("code",[s._v("POST")]),s._v(" 请求方式\n依赖："),t("code",[s._v("GenericAPIView")]),s._v(", "),t("code",[s._v("CreateModelMixin")])]),s._v(" "),t("li",[t("code",[s._v("ListAPIView")]),s._v("\n用于仅只读模型实例对象集合数据的视图\n提供 "),t("code",[s._v("GET")]),s._v(" 请求方式\n依赖："),t("code",[s._v("GenericAPIView")]),s._v(", "),t("code",[s._v("ListModelMixin")])]),s._v(" "),t("li",[t("code",[s._v("RetrieveAPIView")]),s._v("\n用于仅只读单个模型实例对象的视图\n提供 "),t("code",[s._v("GET")]),s._v(" 请求方式\n依赖："),t("code",[s._v("GenericAPIView")]),s._v(", "),t("code",[s._v("RetrieveModelMixin")])]),s._v(" "),t("li",[t("code",[s._v("DestroyAPIView")]),s._v("\n用于仅删除单个模型实例对象的视图\n提供 "),t("code",[s._v("DELETE")]),s._v(" 请求方式\n依赖："),t("code",[s._v("GenericAPIView")]),s._v(", "),t("code",[s._v("DestroyModelMixin")])]),s._v(" "),t("li",[t("code",[s._v("UpdateAPIView")]),s._v("\n用于仅对已有模型实例进行修改的视图\n提供 "),t("code",[s._v("PUT")]),s._v(" 和 "),t("code",[s._v("PATCH")]),s._v(" 请求方式\n依赖："),t("code",[s._v("GenericAPIView")]),s._v(", "),t("code",[s._v("UpdateModelMixin")])]),s._v(" "),t("li",[t("code",[s._v("ListCreateAPIView")]),s._v("\n用于对模型实例对象集读取和写入的视图\n提供 "),t("code",[s._v("GET")]),s._v(" 和 "),t("code",[s._v("POST")]),s._v(" 请求方式\n依赖："),t("code",[s._v("GenericAPIView")]),s._v(", "),t("code",[s._v("ListModelMixin")]),s._v(", "),t("code",[s._v("CreateModelMixin")])]),s._v(" "),t("li",[t("code",[s._v("RetrieveUpdateAPIView")]),s._v("\n用于对单个模型实例的读取和更新的视图\n提供 "),t("code",[s._v("GET")]),s._v("、 "),t("code",[s._v("PUT")]),s._v(" 和 "),t("code",[s._v("PATCH")]),s._v(" 请求方式\n依赖："),t("code",[s._v("GenericAPIView")]),s._v(", "),t("code",[s._v("RetrieveModelMixin")]),s._v(", "),t("code",[s._v("UpdateModelMixin")])]),s._v(" "),t("li",[t("code",[s._v("RetrieveDestroyAPIView")]),s._v("\n用于对单个模型实例的读取和删除的视图\n提供 "),t("code",[s._v("GET")]),s._v(" 和 "),t("code",[s._v("DELETE")]),s._v(" 请求方式\n依赖："),t("code",[s._v("GenericAPIView")]),s._v(", "),t("code",[s._v("RetrieveModelMixin")]),s._v(", "),t("code",[s._v("DestroyModelMixin")])]),s._v(" "),t("li",[t("code",[s._v("RetrieveUpdateDestroyAPIView")]),s._v("\n用于对单个模型实例的读取、更新和删除的视图\n提供 "),t("code",[s._v("GET")]),s._v("、"),t("code",[s._v("PUT")]),s._v("、"),t("code",[s._v("PATCH")]),s._v(" 和 "),t("code",[s._v("DELETE")]),s._v(" 请求方式\n依赖："),t("code",[s._v("GenericAPIView")]),s._v(", "),t("code",[s._v("RetrieveModelMixin")]),s._v(", "),t("code",[s._v("UpdateModelMixin")]),s._v(", "),t("code",[s._v("DestroyModelMixin")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);