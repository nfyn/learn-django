(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{580:function(s,t,a){"use strict";a.r(t);var e=a(17),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"rest-framework专栏讲解-二十三-returning-urls"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rest-framework专栏讲解-二十三-returning-urls"}},[s._v("#")]),s._v(" Rest-framework专栏讲解(二十三)：Returning URLs")]),s._v(" "),a("p",[s._v("通常最好是从 Web API 返回绝对 URL (比如 "),a("code",[s._v("http://example.com/foobar")]),s._v("), 而不是相对 URL (比如 "),a("code",[s._v("/foobar")]),s._v("), 这将会是更好的做法。")]),s._v(" "),a("p",[s._v("这样做的好处是：")]),s._v(" "),a("ul",[a("li",[s._v("更加明确")]),s._v(" "),a("li",[s._v("它为您的 API 客户端减少了工作")]),s._v(" "),a("li",[s._v("当在 JSON 等, 没有本机 URL 类型的表示中找到字符串时, 其含义没有任何歧义")]),s._v(" "),a("li",[s._v("它使得使用超链接标记 HTML 表示之类的事情变得很容易")])]),s._v(" "),a("p",[s._v("框架提供了两个实用函数, 使得从 Web API 返回绝对 URL 变得更加简单。")]),s._v(" "),a("p",[s._v("不需要您使用它们, 但是如果您使用了, 那么自描述 API 将能够自动为您超链接其输出, 这使得浏览 API 更加容易。")]),s._v(" "),a("h3",{attrs:{id:"reverse"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reverse"}},[s._v("#")]),s._v(" reverse")]),s._v(" "),a("p",[s._v("签名: "),a("code",[s._v("reverse(viewname, *args, **kwargs)")])]),s._v(" "),a("p",[s._v("具有与 "),a("code",[s._v("django.url.reverse")]),s._v(" 相同的行为, 但它返回一个完全限定的 URL (使用请求确定主机和端口)。")]),s._v(" "),a("p",[s._v("您应该"),a("strong",[s._v("将请求作为函数的关键字参数")]),s._v("包括在内, 例如：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reverse "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" reverse\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("views "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" APIView\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" django"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("utils"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("timezone "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" now\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("APIRootView")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("APIView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        year "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" now"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("year\n        data "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'year-summary-url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" reverse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'year-summary'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("year"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" request"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" Response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n复制代码\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h3",{attrs:{id:"reverse-lazy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reverse-lazy"}},[s._v("#")]),s._v(" reverse_lazy")]),s._v(" "),a("p",[s._v("签名："),a("code",[s._v("reverse_lazy(viewname, *args, **kwargs)")])]),s._v(" "),a("p",[s._v("具有和 "),a("code",[s._v("django.url.reverse_lazy")]),s._v(" 相同的行为, 但它返回一个完全限定的 URL (使用请求来确定主机和端口)。")]),s._v(" "),a("p",[s._v("与 "),a("code",[s._v("reverse")]),s._v(" 函数一样, 应该"),a("strong",[s._v("将请求作为关键字参数")]),s._v("包含到函数中, 例如：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("api_root "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" reverse_lazy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'api-root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" request"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);